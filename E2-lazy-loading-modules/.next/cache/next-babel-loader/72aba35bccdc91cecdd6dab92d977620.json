{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport React from \"react\";\nimport Layout from '../components/MyLayout.js';\nimport Link from 'next/link';\nimport loadDB from '../lib/load-db';\n\nfunction PostLink(props) {\n  return React.createElement(\"li\", null, React.createElement(Link, {\n    as: `/p/${props.id}`,\n    href: `/post?id=${props.id}`\n  }, React.createElement(\"a\", null, props.title)));\n}\n\nfunction Index({\n  stories\n}) {\n  return React.createElement(Layout, null, React.createElement(\"h1\", null, \"Hacker News - Latest\"), React.createElement(\"ul\", null, stories.map(story => React.createElement(PostLink, {\n    key: story.id,\n    id: story.id,\n    title: story.title\n  }))));\n}\n\nIndex.getInitialProps = async function () {\n  const db = await loadDB();\n  const ids = await db.child('topstories').once('value');\n  let stories = await _Promise.all(ids.val().slice(0, 10).map(id => db.child('item').child(id).once('value')));\n  stories = stories.map(s => s.val());\n  return {\n    stories\n  };\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}