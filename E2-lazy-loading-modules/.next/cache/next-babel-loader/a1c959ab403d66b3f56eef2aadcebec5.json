{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport React from \"react\";\nimport Layout from '../components/MyLayout.js';\nimport Link from 'next/link';\nimport loadDB from '../lib/load-db';\n\nfunction PostLink(props) {\n  return React.createElement(\"li\", null, React.createElement(Link, {\n    as: `/p/${props.id}`,\n    href: `/post?id=${props.id}`\n  }, React.createElement(\"a\", null, props.title)));\n}\n\nfunction Index({\n  stories\n}) {\n  return React.createElement(Layout, null, React.createElement(\"h1\", null, \"Hacker News - Latest\"), React.createElement(\"ul\", null, stories.map(story => React.createElement(PostLink, {\n    key: story.id,\n    id: story.id,\n    title: story.title\n  }))));\n}\n\nIndex.getInitialProps = async function () {\n  const db = await loadDB();\n  const ids = await db.child('topstories').once('value');\n  let stories = await _Promise.all(ids.val().slice(0, 10).map(id => db.child('item').child(id).once('value')));\n  stories = stories.map(s => s.val());\n  return {\n    stories\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["D:\\gitTest\\next-learn-demo\\E2-lazy-loading-modules\\pages\\index.js"],"names":["Layout","Link","loadDB","PostLink","props","id","title","Index","stories","map","story","getInitialProps","db","ids","child","once","all","val","slice","s"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,2BAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,SACE,gCACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAG,MAAKA,KAAK,CAACC,EAAG,EAAzB;AAA4B,IAAA,IAAI,EAAG,YAAWD,KAAK,CAACC,EAAG;AAAvD,KACE,+BAAID,KAAK,CAACE,KAAV,CADF,CADF,CADF;AAOD;;AAED,SAASC,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAA4B;AAC1B,SACE,oBAAC,MAAD,QACE,uDADF,EAEE,gCACGA,OAAO,CAACC,GAAR,CAAYC,KAAK,IAChB,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,KAAK,CAACL,EAArB;AAAyB,IAAA,EAAE,EAAEK,KAAK,CAACL,EAAnC;AAAuC,IAAA,KAAK,EAAEK,KAAK,CAACJ;AAApD,IADD,CADH,CAFF,CADF;AAUD;;AAEDC,KAAK,CAACI,eAAN,GAAwB,kBAAiB;AACvC,QAAMC,EAAE,GAAG,MAAMV,MAAM,EAAvB;AAEA,QAAMW,GAAG,GAAG,MAAMD,EAAE,CAACE,KAAH,CAAS,YAAT,EAAuBC,IAAvB,CAA4B,OAA5B,CAAlB;AACA,MAAIP,OAAO,GAAG,MAAM,SAAQQ,GAAR,CAClBH,GAAG,CACAI,GADH,GAEGC,KAFH,CAES,CAFT,EAEY,EAFZ,EAGGT,GAHH,CAGOJ,EAAE,IACLO,EAAE,CACCE,KADH,CACS,MADT,EAEGA,KAFH,CAEST,EAFT,EAGGU,IAHH,CAGQ,OAHR,CAJJ,CADkB,CAApB;AAYAP,EAAAA,OAAO,GAAGA,OAAO,CAACC,GAAR,CAAYU,CAAC,IAAIA,CAAC,CAACF,GAAF,EAAjB,CAAV;AAEA,SAAO;AAAET,IAAAA;AAAF,GAAP;AACD,CAnBD;;AAqBA,eAAeD,KAAf","sourcesContent":["import Layout from '../components/MyLayout.js'\r\nimport Link from 'next/link'\r\nimport loadDB from '../lib/load-db'\r\n\r\nfunction PostLink(props) {\r\n  return (\r\n    <li>\r\n      <Link as={`/p/${props.id}`} href={`/post?id=${props.id}`}>\r\n        <a>{props.title}</a>\r\n      </Link>\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction Index({ stories }) {\r\n  return (\r\n    <Layout>\r\n      <h1>Hacker News - Latest</h1>\r\n      <ul>\r\n        {stories.map(story => (\r\n          <PostLink key={story.id} id={story.id} title={story.title} />\r\n        ))}\r\n      </ul>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nIndex.getInitialProps = async function() {\r\n  const db = await loadDB()\r\n\r\n  const ids = await db.child('topstories').once('value')\r\n  let stories = await Promise.all(\r\n    ids\r\n      .val()\r\n      .slice(0, 10)\r\n      .map(id =>\r\n        db\r\n          .child('item')\r\n          .child(id)\r\n          .once('value')\r\n      )\r\n  )\r\n\r\n  stories = stories.map(s => s.val())\r\n\r\n  return { stories }\r\n}\r\n\r\nexport default Index\r\n"]},"metadata":{},"sourceType":"module"}